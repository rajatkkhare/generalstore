{% extends 'front/layouts/app.html' %}
{% block title %}Register - General Store{% endblock %}
{% block body %}
<div class="row mb40 mh400">
    <div class="col-sm-4 col-sm-offset-4">
        <div class="panel">
            <div class="panel-heading my-panel-heading">
                <h3 class="panel-title">Register</h3>
            </div>
            <form class="form-horizontal" method="post" action="{{ url_for('front_auth.register') }}" onsubmit="" enctype="multipart/form-data">
                {{ form.csrf_token }}
                <div class="panel-body">
                    <div class="form-group">
                        <div class="col-md-6 {% if form.first_name.errors %}has-error{% endif %}">
                            <input class="form-control" id="first_name" type="text" name="first_name" placeholder="First Name" value="{{ request.form['first_name'] }}">
                            {% if form.first_name.errors %}
                            <div class="help-block">
                            {% for err_msg in form.first_name.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        <div class="col-md-6 {% if form.last_name.errors %}has-error{% endif %}">
                            <input class="form-control" id="last_name" type="text" name="last_name" placeholder="Last Name" value="{{ request.form['last_name'] }}">
                            {% if form.last_name.errors %}
                            <div class="help-block">
                            {% for err_msg in form.last_name.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12 {% if form.email.errors %}has-error{% endif %}">
                            <input class="form-control" id="email" type="text" name="email" placeholder="Email" value="{{ request.form['email'] }}">
                            {% if form.email.errors %}
                            <div class="help-block">
                            {% for err_msg in form.email.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12 {% if form.phone.errors %}has-error{% endif %}">
                            <input class="form-control" id="phone" type="text" name="phone" placeholder="Phone" value="{{ request.form['phone'] }}">
                            {% if form.phone.errors %}
                            <div class="help-block">
                            {% for err_msg in form.phone.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12 {% if form.address.errors %}has-error{% endif %}">
                            <textarea class="form-control" id="address" name="address" placeholder="Address" rows="4">{{ request.form['address'] }}</textarea>
                            {% if form.address.errors %}
                            <div class="help-block">
                            {% for err_msg in form.address.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12 {% if form.avatar.errors %}has-error{% endif %}">
                            <input class="form-control" id="avatar" type="file" name="avatar" accept="image/jpeg, image/jpg">
                            {% if form.avatar.errors %}
                            <div class="help-block">
                            {% for err_msg in form.avatar.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12 {% if form.password.errors %}has-error{% endif %}">
                            <input class="form-control" id="password" type="password" name="password" placeholder="Password">
                            {% if form.password.errors %}
                            <div class="help-block">
                            {% for err_msg in form.password.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <div class="col-md-12 {% if form.confirm_password.errors %}has-error{% endif %}">
                            <input class="form-control" id="confirm-password" type="password" name="confirm_password" placeholder="Confirm Password">
                            {% if form.confirm_password.errors %}
                            <div class="help-block">
                            {% for err_msg in form.confirm_password.errors %}
                                <strong>{{ err_msg }}</strong>
                            {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="panel-footer">
                    <div class="pull-right">
                        <button type="submit" class="btn btn-primary my-btn-primary">Register</button>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    function validate() {
        var first_name = $('#first_name');
        var last_name = $('#last_name');
        var email = $('#email');
        var phone = $('#phone');
        var address = $('#address');
        var password = $('#password');
        var c_password = $('#confirm-password');
        var err = 0;

        if (first_name.val() == '') {
            first_name.addClass('error-border');
            err = 1;
        } else first_name.removeClass('error-border');
        if (last_name.val() == '') {
            last_name.addClass('error-border');
            err = 1;
        } else last_name.removeClass('error-border');
        if (email.val() == '' || !/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email.val())) {
            email.addClass('error-border');
            err = 1;
        } else email.removeClass('error-border');
        if (phone.val() != '') {
            if (isNaN(phone.val()) || (phone.val()).length < 10 || (phone.val()).length > 14) {
                phone.addClass('error-border');
                err = 1;
            } else phone.removeClass('error-border');
        }
        if (address.val() == '') {
            address.addClass('error-border');
            err = 1;
        } else address.removeClass('error-border');
        if (password.val() == '') {
            password.addClass('error-border');
            err = 1;
        } else password.removeClass('error-border');
        if (c_password.val() == '') {
            c_password.addClass('error-border');
            err = 1;
        } else {
            if (c_password.val() != password.val()) {
                c_password.addClass('error-border');
                err = 1;
            } else c_password.removeClass('error-border');
        }

        if (err) return false;
    }
</script>
{% endblock %}
